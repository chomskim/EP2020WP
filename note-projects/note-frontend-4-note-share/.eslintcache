[{"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/index.js":"1","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/App.js":"2","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/config.js":"3","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/registerServiceWorker.js":"4","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/MainRouter.js":"5","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/Menu.js":"6","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/libs/contextLib.js":"7","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/Home.js":"8","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/NotFound.js":"9","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/NewNote.js":"10","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/Notes.js":"11","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/Signin.js":"12","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/Signup.js":"13","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/AuthenticatedRoute.js":"14","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/UnauthenticatedRoute.js":"15","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/ResetPassword.js":"16","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/libs/errorLib.js":"17","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/LoaderButton.js":"18","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/CreateRoom.js":"19","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/RoomList.js":"20","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/UpdateRoom.js":"21","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/libs/constants.js":"22"},{"size":955,"mtime":1606634408984,"results":"23","hashOfConfig":"24"},{"size":1213,"mtime":1606635901244,"results":"25","hashOfConfig":"24"},{"size":498,"mtime":1606634408984,"results":"26","hashOfConfig":"24"},{"size":4384,"mtime":1606263148179,"results":"27","hashOfConfig":"24"},{"size":1568,"mtime":1606646161929,"results":"28","hashOfConfig":"24"},{"size":1422,"mtime":1606636526835,"results":"29","hashOfConfig":"24"},{"size":2117,"mtime":1607267014044,"results":"30","hashOfConfig":"24"},{"size":3122,"mtime":1606834630440,"results":"31","hashOfConfig":"24"},{"size":188,"mtime":1606263148155,"results":"32","hashOfConfig":"24"},{"size":2509,"mtime":1607267098481,"results":"33","hashOfConfig":"24"},{"size":4490,"mtime":1607267285297,"results":"34","hashOfConfig":"24"},{"size":2248,"mtime":1606263148103,"results":"35","hashOfConfig":"24"},{"size":3902,"mtime":1606263148107,"results":"36","hashOfConfig":"24"},{"size":466,"mtime":1606263148095,"results":"37","hashOfConfig":"24"},{"size":852,"mtime":1606263148119,"results":"38","hashOfConfig":"24"},{"size":3728,"mtime":1606263148099,"results":"39","hashOfConfig":"24"},{"size":191,"mtime":1606263148179,"results":"40","hashOfConfig":"24"},{"size":463,"mtime":1606263148135,"results":"41","hashOfConfig":"24"},{"size":2409,"mtime":1606656179220,"results":"42","hashOfConfig":"24"},{"size":2836,"mtime":1606834017737,"results":"43","hashOfConfig":"24"},{"size":5528,"mtime":1606824950800,"results":"44","hashOfConfig":"24"},{"size":71,"mtime":1606828041692,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"1h4x2l0",{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"48"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"48"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"48"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"48"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"48"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"48"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"48"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"48"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/index.js",[],["100","101"],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/App.js",["102"],"import React, { useState, useEffect } from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport \"./App.css\";\nimport Menu from \"./Menu\";\nimport MainRouter from \"./MainRouter\";\nimport { MainContext, useMainReducer } from \"./libs/contextLib\";\n\nfunction App() {\n  const [state, reducer] = useMainReducer();\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      console.log(\"App onLoad \");\n      const res = await Auth.currentSession();\n      console.log('currentSession res =',res);\n      if (res) {\n        const email = res.idToken.payload.email;\n        const auth = {\n          isAuthenticated: true,\n          userId: email,\n        };\n        reducer({ type: \"setAuth\", payload: auth });  \n      }\n    } catch (e) {\n      console.log('currentSession error =',e);\n      if (e !== \"No current user\") {\n        alert(e);\n      }\n    }\n\n    setIsAuthenticating(false);\n  }\n\n\n  return (\n    !isAuthenticating && (\n    <div className=\"App container\">\n      <MainContext.Provider value={{ state, reducer }}>\n        <Menu />\n        <MainRouter />\n      </MainContext.Provider>\n    </div>\n  ));\n}\n\nexport default App;\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/config.js",["103"],"export default {\n  apiGateway: {\n    REGION: 'ap-northeast-2',\n    URL: 'https://z3yhfakpal.execute-api.ap-northeast-2.amazonaws.com/dev',\n  },\n  apiGatewayRoom: {\n    REGION: 'ap-northeast-2',\n    URL: 'https://86oh869wbd.execute-api.ap-northeast-2.amazonaws.com/dev',\n  },\n  cognito: {\n    REGION: 'ap-northeast-2',\n    USER_POOL_ID: 'ap-northeast-2_3lUsAw6YQ',\n    APP_CLIENT_ID: '5vnto9slg0bcmsbc49ur1rfe17',\n    IDENTITY_POOL_ID: 'ap-northeast-2:87dad61b-ced3-495e-ad9b-31e41efce2db',\n  },\n};\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/registerServiceWorker.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/MainRouter.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/Menu.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/libs/contextLib.js",["104"],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/Home.js",["105","106"],"import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { API } from \"aws-amplify\";\nimport { PageHeader, ListGroup, ListGroupItem } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { useMainContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport RoomList from \"./RoomList\";\nimport { CONSTANTS } from \"../libs/constants\";\n\nimport \"./Home.css\";\n\nexport default function Home() {\n  const { state, reducer } = useMainContext();\n  const [notes, setNotes] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  useEffect(() => {\n    onLoad();\n  }, [state.curRoom]);\n\n  async function onLoad() {\n    if (!state.auth.isAuthenticated) {\n      return;\n    }\n    try {\n      console.log(\"Home email=\", state.auth.userId);\n      const notes = await loadNotes();\n      console.log(\"notes=\", notes);\n      reducer({ type: \"setNotes\", payload: notes });\n      setNotes(notes);\n    } catch (e) {\n      console.log(\"Home onLoad Error e=\", e);\n      onError(e);\n    }\n    setIsLoading(false);\n  }\n\n  function loadNotes() {\n    const endpoint =\n      state.curRoom.roomId === CONSTANTS.NO_ROOM.roomId\n        ? `/notes/by/${state.auth.userId}`\n        : `/notes/room/${state.curRoom.roomId}`;\n    console.log(\"loadNotes endpoint=\", endpoint);\n    return API.get(\"notes\", endpoint);\n  }\n\n  function renderNotesList(notes) {\n    return notes.map((note, i) => (\n      <LinkContainer key={note.noteId} to={`/notes/${note.noteId}`}>\n        <ListGroupItem header={note.title} style={{ display: \"flex\" }}>\n          {note.content ? note.content.trim().split(\"\\n\")[0] : \"\"}\n          <span style={{ position: \"absolute\", right: 180 }}>\n            {\"Created: \" + new Date(note.created).toISOString().substring(0, 10)}\n          </span>\n          <span style={{ position: \"absolute\", right: 10 }}>\n            {\"Updated: \" + new Date(note.updated).toISOString().substring(0, 10)}\n          </span>\n        </ListGroupItem>\n      </LinkContainer>\n    ));\n  }\n\n  function renderSignin() {\n    return (\n      <div className=\"signin\">\n        <h1>Scratch</h1>\n        <p>A simple note taking app</p>\n        <div>\n          <Link to=\"/signin\" className=\"btn btn-info btn-lg\">\n            Signin\n          </Link>\n          <Link to=\"/signup\" className=\"btn btn-success btn-lg\">\n            Signup\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotes() {\n    return (\n      <div className=\"notes\">\n        <PageHeader>Your Rooms</PageHeader>\n        <RoomList />\n        <PageHeader>Your Notes</PageHeader>\n        <ListGroup>\n          <LinkContainer key=\"new\" to=\"/notes/new\">\n            <ListGroupItem>\n              <h4>\n                <b>{\"\\uFF0B\"}</b> Create a new note\n              </h4>\n            </ListGroupItem>\n          </LinkContainer>\n          {!isLoading && renderNotesList(notes)}\n        </ListGroup>\n      </div>\n    );\n  }\n\n  return <div className=\"Home\">{state.auth.isAuthenticated ? renderNotes() : renderSignin()}</div>;\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/NotFound.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/NewNote.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/Notes.js",["107","108"],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/Signin.js",["109"],"import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Auth } from \"aws-amplify\";\nimport { Form, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { useMainContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Signin.css\";\n\nexport default function Signin() {\n  const { state, reducer } = useMainContext();\n  const history = useHistory();\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return values.email.length > 0 && values.password.length > 0;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n      console.log(\"handleSubmit values=\", values);\n      const res = await Auth.signIn(values.email, values.password);\n      console.log(\"signIn res =\", res);\n      const auth = {\n        isAuthenticated: true,\n        userId: values.email,\n      };\n      console.log(\"signin auth=\", auth);\n      reducer({ type: \"setAuth\", payload: auth });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n  const handleChange = (name) => (event) => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  return (\n    <div className=\"Signin\">\n      <Form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <ControlLabel>Email</ControlLabel>\n          <FormControl autoFocus type=\"email\" value={values.email} onChange={handleChange(\"email\")} />\n        </FormGroup>\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <ControlLabel>Password</ControlLabel>\n          <FormControl type=\"password\" value={values.password} onChange={handleChange(\"password\")} />\n        </FormGroup>\n        <Link to=\"/signin/reset\">Forgot password?</Link>\n        <LoaderButton\n          className=\"btn btn-info btn-lg\"\n          block\n          bsSize=\"large\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n          type=\"submit\"\n        >\n          Signin\n        </LoaderButton>\n      </Form>\n    </div>\n  );\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/Signup.js",["110"],"import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Auth } from \"aws-amplify\";\nimport { HelpBlock, Form, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { useMainContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Signup.css\";\n\nexport default function Signup() {\n  const { state, reducer } = useMainContext();\n  const history = useHistory();\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    confirmationCode: \"\",\n  });\n  const [newUser, setNewUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return values.email.length > 0 && values.password.length > 0 && values.password === values.confirmPassword;\n  }\n\n  function validateConfirmationForm() {\n    return values.confirmationCode.length > 0;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n      const nuser = await Auth.signUp({\n        username: values.email,\n        password: values.password,\n      });\n      console.log(\"NewUser=\", nuser);\n      setIsLoading(false);\n      setNewUser(nuser);\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  async function handleConfirmationSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n      await Auth.confirmSignUp(values.email, values.confirmationCode);\n      await Auth.signIn(values.email, values.password);\n      console.log(\"email, password=\", values.email, values.password);\n      const auth = {\n        isAuthenticated: true,\n        userId: values.email,\n      };\n      console.log(\"signin auth=\", auth);\n      reducer({ type: \"setAuth\", payload: auth });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n  const handleChange = (name) => (event) => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  function renderConfirmationForm() {\n    return (\n      <Form onSubmit={handleConfirmationSubmit}>\n        <FormGroup controlId=\"confirmationCode\" bsSize=\"large\">\n          <ControlLabel>Confirmation Code</ControlLabel>\n          <FormControl\n            autoFocus\n            type=\"tel\"\n            onChange={handleChange(\"confirmationCode\")}\n            value={values.confirmationCode}\n          />\n          <HelpBlock>Please check your email for the code.</HelpBlock>\n        </FormGroup>\n        <LoaderButton block type=\"submit\" bsSize=\"large\" isLoading={isLoading} disabled={!validateConfirmationForm()}>\n          Verify\n        </LoaderButton>\n      </Form>\n    );\n  }\n\n  function renderForm() {\n    return (\n      <Form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <ControlLabel>Email</ControlLabel>\n          <FormControl autoFocus type=\"email\" value={values.email} onChange={handleChange(\"email\")} />\n        </FormGroup>\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <ControlLabel>Password</ControlLabel>\n          <FormControl type=\"password\" value={values.password} onChange={handleChange(\"password\")} />\n        </FormGroup>\n        <FormGroup controlId=\"confirmPassword\" bsSize=\"large\">\n          <ControlLabel>Confirm Password</ControlLabel>\n          <FormControl type=\"password\" onChange={handleChange(\"confirmPassword\")} value={values.confirmPassword} />\n        </FormGroup>\n        <LoaderButton\n          className=\"btn btn-success btn-lg\"\n          block\n          bsSize=\"large\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n          type=\"submit\"\n        >\n          Signup\n        </LoaderButton>\n      </Form>\n    );\n  }\n\n  return <div className=\"Signup\">{newUser === null ? renderForm() : renderConfirmationForm()}</div>;\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/AuthenticatedRoute.js",["111"],"import React from \"react\";\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\nimport { useMainContext } from \"../libs/contextLib\";\n\nexport default function AuthenticatedRoute({ children, ...rest }) {\n  const { state, reducer } = useMainContext();\n  const { pathname, search } = useLocation();\n  return (\n    <Route {...rest}>\n      {state.auth.isAuthenticated ? children : <Redirect to={`/signin?redirect=${pathname}${search}`} />}\n    </Route>\n  );\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/UnauthenticatedRoute.js",["112"],"import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useMainContext } from \"../libs/contextLib\";\n\nfunction querystring(name, url = window.location.href) {\n  name = name.replace(/[[]]/g, \"\\\\$&\");\n\n  const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\", \"i\");\n  const results = regex.exec(url);\n\n  if (!results) {\n    return null;\n  }\n  if (!results[2]) {\n    return \"\";\n  }\n\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nexport default function UnauthenticatedRoute({ children, ...rest }) {\n  const { state, reducer } = useMainContext();\n  const redirect = querystring(\"redirect\");\n  return (\n    <Route {...rest}>\n      {!state.auth.isAuthenticated ? (\n        children\n      ) : (\n        <Redirect to={redirect === \"\" || redirect === null ? \"/\" : redirect} />\n      )}\n    </Route>\n  );\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/auth/ResetPassword.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/libs/errorLib.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/LoaderButton.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/CreateRoom.js",[],"/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/RoomList.js",["113","114","115","116","117"],"import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { API } from \"aws-amplify\";\nimport { PageHeader, ListGroup, ListGroupItem, Button, Glyphicon } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { useMainContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport { CONSTANTS } from \"../libs/constants\";\n\nimport \"./RoomList.css\";\n\nexport default function RoomList() {\n  const { state, reducer } = useMainContext();\n  const [roomList, setRoomList] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    if (!state.auth.isAuthenticated) {\n      return;\n    }\n    try {\n      console.log(\"RoomList email=\", state.auth.userId);\n      let rooms = await loadroomList();\n      console.log(\"rooms=\", rooms);\n      rooms = rooms.map((rm) => {\n        if (!Array.isArray(rm.memberList)) {\n          return { ...rm, memberList: JSON.parse(rm.memberList) };\n        } else return rm;\n      });\n\n      console.log(\"rooms=\", rooms);\n      rooms.unshift(CONSTANTS.NO_ROOM);\n      reducer({ type: \"setRoomList\", payload: rooms });\n      reducer({ type: \"setCurRoom\", payload: CONSTANTS.NO_ROOM });\n      setRoomList(rooms);\n    } catch (e) {\n      onError(e);\n    }\n    setIsLoading(false);\n  }\n\n  function loadroomList() {\n    //return API.get(\"room\", `/room/owner/${state.auth.userId}`);\n    return API.get(\"room\", `/room/member/${state.auth.userId}`);\n  }\n\n  const handleRoomSelect = (rm) => (event) => {\n    console.log(\"handleRoomSelect rm =\", rm);\n    reducer({ type: \"setCurRoom\", payload: rm });\n  }\n\n  function renderRoomList(rooms) {\n    return rooms.map((room, i) => (\n      <ListGroupItem\n        key={room.roomId}\n        header={room.roomId}\n        style={{ display: \"flex\" }}\n        onClick={handleRoomSelect(room)}\n      >\n        {room.owner && (\n          <>\n            <span align=\"center\" style={{ position: \"absolute\", right: 230, top: 15 }}>\n              {\"Created: \" + new Date(room.created).toISOString().substring(0, 10)}\n            </span>\n            <span align=\"center\" style={{ position: \"absolute\", right: 60, top: 15 }}>\n              {\"Updated: \" + new Date(room.updated).toISOString().substring(0, 10)}\n            </span>\n            {state.auth.userId === room.owner && (\n              <LinkContainer style={{ position: \"absolute\", right: 5, top: 10 }} to={`/room/${room.roomId}`}>\n                <Button>\n                  <Glyphicon glyph=\"pencil\" className=\"fill\" />\n                </Button>\n              </LinkContainer>\n            )}\n          </>\n        )}\n      </ListGroupItem>\n    ));\n  }\n\n  return <div className=\"RoomList\">{state.auth.isAuthenticated && renderRoomList(roomList)}</div>;\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/components/UpdateRoom.js",["118","119","120","121","122"],"import React, { useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { API } from \"aws-amplify\";\nimport {\n  ControlLabel,\n  Form,\n  FormGroup,\n  FormControl,\n  ListGroup,\n  ListGroupItem,\n  Glyphicon,\n  Button,\n} from \"react-bootstrap\";\nimport { useMainContext } from \"../libs/contextLib\";\nimport LoaderButton from \"./LoaderButton\";\nimport { onError } from \"../libs/errorLib\";\n\nimport \"./UpdateRoom.css\";\n\nexport default function UpdateRoom() {\n  const { state, reducer } = useMainContext();\n  const { id } = useParams();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [room, setRoom] = useState(null);\n  const [values, setValues] = useState({\n    description: \"\",\n    newMember: \"\",\n  });\n  useEffect(() => {\n    console.log(\"UpdateRoom useEffect id=\", id);\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      const curRoom = await loadRoom();\n      if (!Array.isArray(curRoom.memberList)) {\n        curRoom.memberList = JSON.parse(curRoom.memberList);\n      }\n      console.log(\"curRoom=\", curRoom);\n      setRoom(curRoom);\n      setValues({\n        name: curRoom.roomId,\n        description: curRoom.roomDesc,\n      });\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n  function loadRoom() {\n    console.log(\"loadRoom id=\", id);\n    return API.get(\"room\", `/room/${id}`);\n  }\n\n  function validateForm() {\n    return values.description.length > 0 || values.newMember.length > 0;\n  }\n  const handleChange = (name) => (event) => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  function updateRoom(updRoom) {\n    console.log(\"updRoom=\", updRoom);\n    return API.put(\"room\", `/room/${id}`, {\n      body: updRoom,\n    });\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    console.log(\"values=\", values);\n    setIsLoading(true);\n\n    let newMem;\n    if (values.newMember) {\n      if (!room.memberList.includes(values.newMember)) {\n        newMem = values.newMember;\n      } else {\n        alert(`Member ${values.newMember} already exist!`);\n      }\n    }\n\n    const updRoom = {\n      ...room,\n      roomDesc: values.description || room.roomDesc,\n      memberList: newMem ? [...room.memberList, newMem] : room.memberList,\n    };\n    try {\n      const resUpdRoom = await updateRoom(updRoom);\n      console.log(\"handleSubmit resUpdRoom=\", resUpdRoom);\n      setRoom(updRoom);\n      //history.push(`/room/${id}`);\n    } catch (e) {\n      onError(e);\n    }\n    setIsLoading(false);\n  }\n\n  function deleteRoom() {\n    console.log(\"deleteRoom id=\", id);\n    return API.del(\"room\", `/room/${id}`);\n  }\n  async function handleDelete(event) {\n    event.preventDefault();\n\n    const confirmed = window.confirm(\"Are you sure you want to delete this Room?\");\n    if (!confirmed) {\n      return;\n    }\n\n    setIsDeleting(true);\n\n    try {\n      await deleteRoom();\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsDeleting(false);\n    }\n  }\n\n  const deleteMember = (mem) => (event) => {\n    if (mem === room.owner) {\n      // ignore delete for owner member\n      alert(\"You can't delete Owner!\");\n      return;\n    }\n    console.log(\"deleteMember mem=\", mem);\n    const newMembers = [...room.memberList];\n    const ind = newMembers.indexOf(mem);\n    newMembers.splice(ind, 1);\n    const newRoom = { ...room, memberList: newMembers };\n    setRoom(newRoom);\n    console.log(\"deleteMember newRoom=\", newRoom);\n  };\n\n  return (\n    <div className=\"UpdateRoom\">\n      <Form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"name\" bsSize=\"large\">\n          <div class=\"col-sm-2\">\n            <ControlLabel align=\"center\" style={{ marginTop: \"10px\" }}>\n              Room Name\n            </ControlLabel>\n          </div>\n          <div class=\"col-sm-10\">\n            <FormControl style={{ marginBottom: \"5px\" }} value={values.name} disabled />\n          </div>\n        </FormGroup>\n        <FormGroup controlId=\"description\">\n          <FormControl\n            style={{ height: \"120px\" }}\n            componentClass=\"textarea\"\n            value={values.description}\n            onChange={handleChange(\"description\")}\n          />\n        </FormGroup>\n        <ListGroup striped bordered hover size=\"sm\">\n          {room &&\n            room.memberList.map((mem) => (\n              <ListGroupItem onClick={deleteMember(mem)}>\n                <span>\n                  <Glyphicon glyph=\"trash\" style={{ marginRight: \"20px\" }} />\n                  {mem}\n                </span>\n              </ListGroupItem>\n            ))}\n        </ListGroup>\n        <FormGroup controlId=\"newMember\" bsSize=\"large\">\n          <div class=\"col-sm-2\">\n            <ControlLabel align=\"center\" style={{ marginTop: \"10px\" }}>\n              New Member\n            </ControlLabel>\n          </div>\n          <div class=\"col-sm-10\">\n            <FormControl\n              style={{ marginBottom: \"5px\" }}\n              value={values.newMember}\n              onChange={handleChange(\"newMember\")}\n            />\n          </div>\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          bsStyle=\"primary\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          Update\n        </LoaderButton>\n        <LoaderButton block bsSize=\"large\" bsStyle=\"danger\" onClick={handleDelete}>\n          Delete\n        </LoaderButton>\n      </Form>\n    </div>\n  );\n}\n","/home/cskim/git-repo/EP2020WP/note-projects/note-frontend-4-note-share/src/libs/constants.js",[],{"ruleId":"123","replacedBy":"124"},{"ruleId":"125","replacedBy":"126"},{"ruleId":"127","severity":1,"message":"128","line":13,"column":6,"nodeType":"129","endLine":13,"endColumn":8,"suggestions":"130"},{"ruleId":"131","severity":1,"message":"132","line":1,"column":1,"nodeType":"133","endLine":16,"endColumn":3},{"ruleId":"134","severity":1,"message":"135","line":4,"column":7,"nodeType":"136","messageId":"137","endLine":4,"endColumn":20},{"ruleId":"127","severity":1,"message":"128","line":20,"column":6,"nodeType":"129","endLine":20,"endColumn":8,"suggestions":"138"},{"ruleId":"127","severity":1,"message":"128","line":24,"column":6,"nodeType":"129","endLine":24,"endColumn":21,"suggestions":"139"},{"ruleId":"134","severity":1,"message":"140","line":17,"column":10,"nodeType":"136","messageId":"137","endLine":17,"endColumn":20},{"ruleId":"127","severity":1,"message":"141","line":26,"column":6,"nodeType":"129","endLine":26,"endColumn":8,"suggestions":"142"},{"ruleId":"134","severity":1,"message":"143","line":11,"column":11,"nodeType":"136","messageId":"137","endLine":11,"endColumn":16},{"ruleId":"134","severity":1,"message":"143","line":11,"column":11,"nodeType":"136","messageId":"137","endLine":11,"endColumn":16},{"ruleId":"134","severity":1,"message":"144","line":6,"column":18,"nodeType":"136","messageId":"137","endLine":6,"endColumn":25},{"ruleId":"134","severity":1,"message":"144","line":22,"column":18,"nodeType":"136","messageId":"137","endLine":22,"endColumn":25},{"ruleId":"134","severity":1,"message":"145","line":2,"column":10,"nodeType":"136","messageId":"137","endLine":2,"endColumn":14},{"ruleId":"134","severity":1,"message":"146","line":4,"column":10,"nodeType":"136","messageId":"137","endLine":4,"endColumn":20},{"ruleId":"134","severity":1,"message":"147","line":4,"column":22,"nodeType":"136","messageId":"137","endLine":4,"endColumn":31},{"ruleId":"134","severity":1,"message":"148","line":15,"column":10,"nodeType":"136","messageId":"137","endLine":15,"endColumn":19},{"ruleId":"127","severity":1,"message":"128","line":19,"column":6,"nodeType":"129","endLine":19,"endColumn":8,"suggestions":"149"},{"ruleId":"134","severity":1,"message":"150","line":12,"column":3,"nodeType":"136","messageId":"137","endLine":12,"endColumn":9},{"ruleId":"134","severity":1,"message":"143","line":21,"column":11,"nodeType":"136","messageId":"137","endLine":21,"endColumn":16},{"ruleId":"134","severity":1,"message":"144","line":21,"column":18,"nodeType":"136","messageId":"137","endLine":21,"endColumn":25},{"ruleId":"134","severity":1,"message":"140","line":25,"column":10,"nodeType":"136","messageId":"137","endLine":25,"endColumn":20},{"ruleId":"127","severity":1,"message":"141","line":34,"column":6,"nodeType":"129","endLine":34,"endColumn":8,"suggestions":"151"},"no-native-reassign",["152"],"no-negated-in-lhs",["153"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'onLoad'. Either include it or remove the dependency array.","ArrayExpression",["154"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-unused-vars","'INIT_NOTES_DB' is assigned a value but never used.","Identifier","unusedVar",["155"],["156"],"'isDeleting' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'id' and 'onLoad'. Either include them or remove the dependency array.",["157"],"'state' is assigned a value but never used.","'reducer' is assigned a value but never used.","'Link' is defined but never used.","'PageHeader' is defined but never used.","'ListGroup' is defined but never used.","'isLoading' is assigned a value but never used.",["158"],"'Button' is defined but never used.",["159"],"no-global-assign","no-unsafe-negation",{"desc":"160","fix":"161"},{"desc":"160","fix":"162"},{"desc":"163","fix":"164"},{"desc":"165","fix":"166"},{"desc":"160","fix":"167"},{"desc":"165","fix":"168"},"Update the dependencies array to be: [onLoad]",{"range":"169","text":"170"},{"range":"171","text":"170"},"Update the dependencies array to be: [onLoad, state.curRoom]",{"range":"172","text":"173"},"Update the dependencies array to be: [id, onLoad]",{"range":"174","text":"175"},{"range":"176","text":"170"},{"range":"177","text":"175"},[407,409],"[onLoad]",[672,674],[717,732],"[onLoad, state.curRoom]",[885,887],"[id, onLoad]",[670,672],[927,929]]